Tdengine 时序数据库
官网文档：https://docs.taosdata.com/intro/

jdbc的配置建hutool jdbc数据源

降采样：https://zhuanlan.zhihu.com/p/433441334
聚合

查询的时间戳跟客户端的时区的一致



#创建超级表
CREATE STABLE  test.service_data_station (create_time timestamp,bid BIGINT,batch_id BIGINT,data_type INT,is_handle INT,data_content VARCHAR(12000),serial_num VARCHAR(200),version bigint,deleted int,creator VARCHAR(20),update_time  timestamp)
TAGS (station_id VARCHAR(20))

#自动创建子表
INSERT INTO test.service_data_station_HN0001  USING test.service_data_station tags('HN0001') VALUES ('2023-02-24 09:48:20.000', 110785559110225920, 202322494820349, 1, 0, '{\"ssid\":\"cqyq002\",\"stationId\":\"HN0001\",\"dataType\":\"1\",\"batchId\":\"202322494820.349\",\"data\":{\"serviceDataAcdc\":[{\"bid\":\"A111\",\"stationId\":\"B222\",\"ChargId\":\"C333\",\"CabinetId\":\"D444\",\"batchId\":\"E555\",\"ACDCId\":\"F666\",\"acdcStatus\":\"G777\",\"DCStatus\":0,\"ACRunStatus\":0,\"OutOverVoltage\":0,\"OverTempProtect\":0,\"ModuleFault\":0,\"GearState\":0,\"FanFault\":0,\"TempStatus\":0,\"TempDeraStatus\":0,\"PowLimitStatus\":0,\"ModuleStatus\":0,\"OverPowProtect\":0,\"OutVoltage\":0,\"ModAddConflict\":0,\"AveCurImbalance\":0,\"CommunicationFails\":0,\"ShortCircLimitStatus\":0,\"PFCFault\":0,\"ACInputPhase\":0,\"ACInputPhaseA\":0,\"ACInputPhaseB\":0,\"ACInputPhaseC\":0,\"BusOverVoltage\":0,\"BusVoltage\":0,\"BusVoltageUnbalan\":0,\"BusVoltageUnbalanNum\":0,\"ACInputOverload\":0,\"ACInputOverloadNum\":0,\"ACOverVoltage\":0,\"ACVoltage\":0,\"ACInputFreqFault\":0,\"ACHardWareFault\":0,\"ACVoltageUnbalan\":0,\"ACPhaseLockFailed\":0,\"ACVoltageFailsRapidly\":0,\"ACInputNormal\":0,\"OutputVoltage\":\"null\",\"OutputCurrent\":\"null\",\"version\":\"null\",\"deleted\":\"null\",\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"},{\"bid\":\"A111\",\"stationId\":\"B222\",\"ChargId\":\"C333\",\"CabinetId\":\"D444\",\"batchId\":\"E555\",\"ACDCId\":\"F666\",\"acdcStatus\":\"G777\",\"DCStatus\":0,\"ACRunStatus\":0,\"OutOverVoltage\":0,\"OverTempProtect\":0,\"ModuleFault\":0,\"GearState\":0,\"FanFault\":0,\"TempStatus\":0,\"TempDeraStatus\":0,\"PowLimitStatus\":0,\"ModuleStatus\":0,\"OverPowProtect\":0,\"OutVoltage\":0,\"ModAddConflict\":0,\"AveCurImbalance\":0,\"CommunicationFails\":0,\"ShortCircLimitStatus\":0,\"PFCFault\":0,\"ACInputPhase\":0,\"ACInputPhaseA\":0,\"ACInputPhaseB\":0,\"ACInputPhaseC\":0,\"BusOverVoltage\":0,\"BusVoltage\":0,\"BusVoltageUnbalan\":0,\"BusVoltageUnbalanNum\":0,\"ACInputOverload\":0,\"ACInputOverloadNum\":0,\"ACOverVoltage\":0,\"ACVoltage\":0,\"ACInputFreqFault\":0,\"ACHardWareFault\":0,\"ACVoltageUnbalan\":0,\"ACPhaseLockFailed\":0,\"ACVoltageFailsRapidly\":0,\"ACInputNormal\":0,\"OutputVoltage\":\"null\",\"OutputCurrent\":\"null\",\"version\":\"null\",\"deleted\":\"null\",\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"},{\"bid\":\"A111\",\"stationId\":\"B222\",\"ChargId\":\"C333\",\"CabinetId\":\"D444\",\"batchId\":\"E555\",\"ACDCId\":\"F666\",\"acdcStatus\":\"G777\",\"DCStatus\":0,\"ACRunStatus\":0,\"OutOverVoltage\":0,\"OverTempProtect\":0,\"ModuleFault\":0,\"GearState\":0,\"FanFault\":0,\"TempStatus\":0,\"TempDeraStatus\":0,\"PowLimitStatus\":0,\"ModuleStatus\":0,\"OverPowProtect\":0,\"OutVoltage\":0,\"ModAddConflict\":0,\"AveCurImbalance\":0,\"CommunicationFails\":0,\"ShortCircLimitStatus\":0,\"PFCFault\":0,\"ACInputPhase\":0,\"ACInputPhaseA\":0,\"ACInputPhaseB\":0,\"ACInputPhaseC\":0,\"BusOverVoltage\":0,\"BusVoltage\":0,\"BusVoltageUnbalan\":0,\"BusVoltageUnbalanNum\":0,\"ACInputOverload\":0,\"ACInputOverloadNum\":0,\"ACOverVoltage\":0,\"ACVoltage\":0,\"ACInputFreqFault\":0,\"ACHardWareFault\":0,\"ACVoltageUnbalan\":0,\"ACPhaseLockFailed\":0,\"ACVoltageFailsRapidly\":0,\"ACInputNormal\":0,\"OutputVoltage\":\"null\",\"OutputCurrent\":\"null\",\"version\":\"null\",\"deleted\":\"null\",\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"},{\"bid\":\"A111\",\"stationId\":\"B222\",\"ChargId\":\"C333\",\"CabinetId\":\"D444\",\"batchId\":\"E555\",\"ACDCId\":\"F666\",\"acdcStatus\":\"G777\",\"DCStatus\":0,\"ACRunStatus\":0,\"OutOverVoltage\":0,\"OverTempProtect\":0,\"ModuleFault\":0,\"GearState\":0,\"FanFault\":0,\"TempStatus\":0,\"TempDeraStatus\":0,\"PowLimitStatus\":0,\"ModuleStatus\":0,\"OverPowProtect\":0,\"OutVoltage\":0,\"ModAddConflict\":0,\"AveCurImbalance\":0,\"CommunicationFails\":0,\"ShortCircLimitStatus\":0,\"PFCFault\":0,\"ACInputPhase\":0,\"ACInputPhaseA\":0,\"ACInputPhaseB\":0,\"ACInputPhaseC\":0,\"BusOverVoltage\":0,\"BusVoltage\":0,\"BusVoltageUnbalan\":0,\"BusVoltageUnbalanNum\":0,\"ACInputOverload\":0,\"ACInputOverloadNum\":0,\"ACOverVoltage\":0,\"ACVoltage\":0,\"ACInputFreqFault\":0,\"ACHardWareFault\":0,\"ACVoltageUnbalan\":0,\"ACPhaseLockFailed\":0,\"ACVoltageFailsRapidly\":0,\"ACInputNormal\":0,\"OutputVoltage\":\"null\",\"OutputCurrent\":\"null\",\"version\":\"null\",\"deleted\":\"null\",\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"}],\"serviceDataDc\":{\"bid\":\"null\",\"stationId\":\"123456789\",\"batchId\":\"null\",\"chargId\":\"null\",\"cabinetId\":\"null\",\"dcId\":\"null\",\"dcStatus\":\"null\",\"outputVoltage\":\"0\",\"outputCurrent\":\"0\",\"effectivePowerValue\":\"0\",\"currentTotalForwardPower\":\"null\",\"currentNegativeTotaldPower\":\"null\",\"highVoltageAlarm\":0,\"lowVoltageAlarm\":0,\"highCurrentAlarm\":0,\"lowCurrentAlarm\":0,\"highPowerAlarm\":0,\"lowPowerAlarm\":0,\"version\":\"null\",\"deleted\":0,\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"},\"serviceDataBMS\":{\"bid\":\"null\",\"stationId\":\"null\",\"batchId\":\"null\",\"chargId\":\"null\",\"CabinetId\":\"null\",\"bmsId\":\"null\",\"bmsStatus\":0,\"maxAllowChargeVoltage\":\"null\",\"BMSProtocolVersion\":\"null\",\"cellsAllowChargingAtMaxVoltage\":\"null\",\"maxAllowableChargingCurrent\":\"null\",\"nominalTotalEnergyPowerBattery\":\"null\",\"maxTotalChargeVoltage\":\"null\",\"maxPermissibleTemperature\":\"null\",\"stateOfChargeSocOfVehiclePowerBattery\":\"null\",\"currentBatteryVoltageOfVehiclePowerBattery\":\"null\",\"batteryType\":0,\"batteryRatedCapacity\":\"null\",\"batteryRatedVoltage\":\"null\",\"batteryManufacture\":\"null\",\"batteryStringNo\":\"null\",\"Year\":0,\"Month\":0,\"day\":0,\"BMSChargeReady\":0,\"demandVoltage\":\"null\",\"demandCurrent\":\"null\",\"chargeMode\":0,\"chargeVoltage\":\"null\",\"chargeCurrent\":\"null\",\"maxCellVoltageNo\":\"null\",\"maxCellChargeVoltage\":\"null\",\"batteryCurrentSoc\":\"0\",\"chargeRemainTime\":\"null\",\"maxBatteryNo\":\"null\",\"maxBatteryTemperature\":\"null\",\"maxBatteryTemperatureNo\":\"null\",\"minBatteryTemperaturn\":\"null\",\"minBatteryTemperaturnNo\":\"null\",\"batteryVoltage\":0,\"batterySoc\":0,\"batteryCurrent\":0,\"batteryTemperature\":0,\"baterryInsulationStatus\":0,\"batteryConnectionStatus\":1,\"allowCharg\":0,\"isRequiredSoc\":0,\"isRequiredTotalVoltage\":0,\"isRequiredSingleVoltage\":0,\"chargerActivelyStop\":0,\"insulationFault\":0,\"connectorTemperatureFault\":0,\"bmsConnectorOverheated\":0,\"chargeConnectorFault\":0,\"batteryStringTemperatureHigh\":0,\"highVoltageFault\":0,\"otherFault\":0,\"overCurrent\":0,\"voltageAbnormal\":0,\"abortSocState\":\"null\",\"maxBatteryVoltage\":\"null\",\"minBatteryVoltage\":\"null\",\"BatteryminTemperature\":\"null\",\"BatterymaxTemperature\":\"null\",\"Crm00OverTime\":0,\"CrmAaOverTime\":0,\"ctsCmlOverTime\":0,\"croOverTime\":0,\"ccsOverTime\":0,\"ctsOverTime\":0,\"csdOverTime\":0,\"otherOverTime\":0,\"version\":\"null\",\"deleted\":0,\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"},\"serviceDataBatcharge\":{\"bid\":\"null\",\"stationId\":\"null\",\"batchId\":0,\"chargId\":\"null\",\"CabinetId\":\"null\",\"batteryChargerId\":\"null\",\"batteryChargeStatus\":\"null\",\"chargeCommunicationProtocolVersion\":\"null\",\"chargerIdentificationResults\":0,\"chargerNo\":\"null\",\"chargerAreaCode\":\"null\",\"maxOutputCurrentOfCharger\":\"null\",\"minOutputCurrentOfCharger\":\"null\",\"chargingPreparationOfCharger\":0,\"outputVoltageValue\":\"null\",\"outputCurrentValue\":\"null\",\"accumulatedChargingTime\":\"null\",\"allowCharging\":0,\"reachConditionSetChargAbort\":0,\"manualTermination\":0,\"faultAbort\":0,\"bmsActiveAbort\":0,\"chargerTemperatureFault\":0,\"chargerConnectorFailure\":0,\"internalOverTemperatureFaultOfCharger\":0,\"chargingConnectorFailure\":0,\"batteryPackTemperatureFault\":0,\"highVoltageRelayFault\":0,\"detectionPoint2VoltageFault\":0,\"otherFaults\":0,\"currentMismatch\":0,\"abnormalVoltage\":0,\"chargingTime\":\"null\",\"outputEnergy\":\"null\",\"ChargerNo2\":\"null\",\"brmTimeout\":0,\"bcpTimeout\":0,\"broTimeout\":0,\"bcsTimeout\":0,\"bclTimeout\":0,\"bstTimeout\":0,\"bsdTimeout\":0,\"deleted\":0,\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"},\"serviceDataCabinet\":{\"bid\":\"null\",\"stationId\":\"null\",\"chargId\":\"null\",\"batchId\":\"0\",\"cabinetId\":\"null\",\"cabinetStatus\":0,\"enablingPotential\":0,\"operatingMode\":0,\"stopChargingDischargingConditions\":0,\"shargingDischargingCurrent\":0,\"chargingGeneratingVoltageSettingFeedback\":\"null\",\"chargingGeneratingCurrentSettingFeedback\":\"null\",\"chargingGeneratingOutputVoltage\":\"null\",\"chargingGeneratingOutputCurrent\":\"null\",\"ISOQCC\":0,\"TOPPOQCC\":\"null\",\"TONPOQCC\":\"null\",\"batteryID\":\"null\",\"SOC\":\"null\",\"totalVoltage\":\"null\",\"batteryStatusCode\":0,\"liquidLevelOfChamber1BatteryMake_UpKettle\":0,\"RS485Status\":0,\"chargingModuleCANStatus\":0,\"fastChargingGunCANStatus\":0,\"batteryChargingCANStatusNS\":0,\"batteryChargingDataCANStatus\":0,\"chargingChamberOutputMainRelayPositive\":0,\"chargingChamberOutputMainRelayNegative\":0,\"fastChargingGunOutputMainRelayPositive\":0,\"fastChargingGunOutputMainRelayNegative\":0,\"localAbsorptionOutputMainRelayPositive\":0,\"localAbsorptionOutputMainRelayNegative\":0,\"ACContactor\":0,\"compartmentFuse\":0,\"kc0Fault\":0,\"kc1Fault\":0,\"kc1InsulationDetectionValue\":0,\"kc1ConnectorTemperature\":0,\"kc1ChargingModule1Fault\":0,\"kc1ChargingModule2Fault\":0,\"kc1ChargingModule3Fault\":0,\"kc1ChargingModule4Fault\":0,\"kc1ACContactorFault\":0,\"kc1FaultOfMainPositiveRelayOfFastChargingGun\":0,\"kc1FaultOfMainNegativeRelayOfFastChargingGun\":0,\"kc1FuseFault\":0,\"kc2Fault\":0,\"kc2InsulationDetectionValue\":0,\"kc2ConnectorTemperature\":0,\"kc2ChargingModule1Fault\":0,\"kc2ChargingModule2Fault\":0,\"kc2ChargingModule3Fault\":0,\"kc2ChargingModule4Fault\":0,\"kc3Fault\":0,\"kc3InsulationDetectionValue\":0,\"kc3ConnectorTemperature\":0,\"kc3ChargingModule1Fault\":0,\"kc3ChargingModule2Fault\":0,\"kc3ChargingModule3Fault\":0,\"kc3ChargingModule4Fault\":0,\"zn0Fault\":0,\"zn1Fault\":0,\"zn1InsulationDetectionValue\":0,\"zn1ConnectorTemperature\":0,\"zn1ChargingModule1Fault\":0,\"zn1ChargingModule2Fault\":0,\"zn1ChargingModule3Fault\":0,\"zn1ChargingModule4Fault\":0,\"zn1ACContactorFault\":0,\"zn1TheMainPositiveRelayOfTheChargingChamberIsFaulty\":0,\"zn1TheMainNegativeRelayOfTheChargingChamberIsFaulty\":0,\"zn1FuseFault\":0,\"zn2Fault\":0,\"zn2InsulationDetectionValue\":0,\"zn2ConnectorTemperature\":0,\"zn2ChargingModule1Fault\":0,\"zn2ChargingModule2Fault\":0,\"zn2ChargingModule3Fault\":0,\"zn2ChargingModule4Fault\":0,\"zn3Fault\":0,\"zn3InsulationDetectionValue\":0,\"zn3ConnectorTemperature\":0,\"zn3ChargingModule1Fault\":0,\"zn3ChargingModule2Fault\":0,\"zn3ChargingModule3Fault\":0,\"zn3ChargingModule4Fault\":0,\"jd0Fault\":0,\"jd1Fault\":0,\"jd1InsulationDetectionValue\":0,\"jd1ConnectorTemperature\":0,\"jd1TheMainPositiveRelayOfTheChargingChamberIsFaulty\":0,\"jd1TheMainNegativeRelayOfTheChargingChamberIsFaulty\":0,\"jd1FaultOfLocalMainPositiveRelay\":0,\"jd1LocalEliminationOfMainNegativeRelayFault\":0,\"jd2Fault\":0,\"jd2InsulationDetectionValue\":0,\"jd2ConnectorTemperature\":0,\"jd3Fault\":0,\"jd3InsulationDetectionValue\":0,\"jd3ConnectorTemperature\":0,\"c0Fault\":0,\"c1Fault\":0,\"c1Level1FaultInStationchargingMode\":0,\"c2fault\":0,\"c2Level1FaultOfFastChargingGunMode\":0,\"c2Level2FaultOfFastChargingGunMode\":0,\"c2Level2FaultInStationChargingMode\":0,\"c2Level1FaultOfLocalAbsorptionMode\":0,\"c2Level2FaultOfLocalAbsorptionMode\":0,\"c3fault\":0,\"c3Level3FaultOfFastChargingGunMode\":0,\"c3Level3FaultInStationChargingMode\":0,\"c3Level3FaultOfLocalAbsorptionMode\":0,\"deleted\":0,\"creator\":\"null\",\"createTime\":\"null\",\"updater\":\"null\",\"updateTime\":\"null\"}},\"starttime\":\"2023-2-24 9:48:20.348\",\"endtime\":\"2023-2-24 9:48:20.349\"}', NULL, NULL, 0, NULL, '2023-02-24 09:48:20');

目前只支持hikari，druid,dbcp2数据源
--------配置yml----------
````
hutool:
  datasource:
    dynamic: # 多数据源配置
      hikari: # hikari 【连接池】相关的全局配置
        # 自动提交
        auto-commit: true
        # 等待连接池分配连接的最大时长（毫秒），超过这个时长还没可用的连接则发生SQLException， 缺省:30秒
        connection-timeout: 30000
        # 一个连接idle状态的最大时长（毫秒），超时则被释放（retired），缺省:
        idle-timeout: 600000
        # 一个连接的生命时长（毫秒），超时而且没被使用则被释放（retired），缺省:30分钟，建议设置比数据库超时时长少30秒，参考MySQL wait_timeout参数（show variables like '%timeout%';）
        max-lifetime: 1800000
        # 获取连接前的测试SQL
        connection-test-query: SELECT 1
        # 最小闲置连接数
        minimumIdle: 10
        # 连接池中允许的最大连接数。缺省值：10；推荐的公式：((core_count * 2) + effective_spindle_count)
        maximumPoolSize: 10
        # 连接只读数据库时配置为true， 保证安全
        readOnly: false
      primary: group_tdengine
      datasource:
        group_tdengine:
          url: jdbc:TAOS-RS://192.168.0.60:6041/information_schema
          username: root
          password: taosdata
          #driver-class-name: com.taosdata.jdbc.rs.RestfulDriver
        group_tdengine2:
          url: jdbc:TAOS://127.0.0.1:6041/test?charset=UTF-8
          username: root
          password: taosdata
          #driver-class-name: com.taosdata.jdbc.rs.RestfulDriver
````